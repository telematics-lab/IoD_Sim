{
  "name": "cttc_nr_demo",
  "resultsPath": "../results/",
  "logOnFile": true,
  "duration": 1,
  "staticNs3Config": [
    {
      // Set it when UEs are too many to handle with default SrsPeriodicity value
      "name": "ns3::NrRlcUm::MaxTxBufferSize",
      "value": 999999999
    }
  ],
  "world": {
    "size": {
      "X": "1000",
      "Y": "1000",
      "Z": "100"
    },
    "buildings": []
  },
  "phyLayer": [
    {
      "type": "nr",
      "bands": [
        {
          "scenario": "UMi",
          "conditionModel": "Default",
          "propagationModel": "ThreeGpp",
          "contiguousCc": true,
          "frequencyBands": [
            {
              "centralFrequency": 28e9,
              "bandwidth": 50e6,
              "numComponentCarriers": 1
            }
          ]
        },
        {
          "scenario": "UMi",
          "conditionModel": "Default",
          "propagationModel": "ThreeGpp",
          "contiguousCc": true,
          "frequencyBands": [
            {
              "centralFrequency": 28.2e9,
              "bandwidth": 50e6,
              "numComponentCarriers": 1
            }
          ]
        }
      ],
      "channelConditionAttributes": [
        {
          "name": "UpdatePeriod",
          "value": "0ms"
        }
      ],
      "pathlossAttributes": [
        {
          "name": "ShadowingEnabled",
          "value": false
        }
      ],
      /*"epcAttributes": [ // NOT WORKS ://
        {
          "name": "S1uLinkDelay",
          "value": "0ms"
        }
      ],*/
      "beamforming": {
        "method": "ns3::DirectPathBeamforming",
        "attributes": []
      },
      "ueAntenna": {
        "type": "ns3::IsotropicAntennaModel",
        "arrayProperties": [
          {
            "name": "NumRows",
            "value": 2
          },
          {
            "name": "NumColumns",
            "value": 4
          }
        ]
      },
      "gnbAntenna": {
        "type": "ns3::IsotropicAntennaModel",
        "arrayProperties": [
          {
            "name": "NumRows",
            "value": 4
          },
          {
            "name": "NumColumns",
            "value": 8
          }
        ]
      },
      "gnbBwpManagerAttribute": [
        {
          "name": "NGBR_LOW_LAT_EMBB",
          "value": 0
        },
        {
          "name": "GBR_CONV_VOICE",
          "value": 1
        }
      ],
      "ueBwpManagerAttribute": [
        {
          "name": "NGBR_LOW_LAT_EMBB",
          "value": 0
        },
        {
          "name": "GBR_CONV_VOICE",
          "value": 1
        }
      ],
      "uePhyAttributes": [
        {
          "name": "TxPower",
          "value": 24.0
        },
        {
          "name": "EnableUplinkPowerControl",
          "value": false
        }
      ],
      "gnbPhyAttributes": [
        {
          "name": "TxPower",
          "value": 35.0
        }
      ]
    }
  ],
  "macLayer": [
    {
      "type": "nr"
    }
  ],
  "networkLayer": [
    // This is not working, but probably should now work due to UE & gNB ips are hardcoded
    {
      "type": "ipv4",
      "address": "1.0.0.0",
      "mask": "255.0.0.0",
      "gateway": "1.0.0.1"
    }
  ],
  "nodes": [
    {
      //LowLat UE
      "netDevices": [
        {
          "type": "nr",
          "networkLayer": 0,
          "role": "UE",
          "bearers": [
            {
              "type": "NGBR_LOW_LAT_EMBB"
            }
          ]
        }
      ],
      "mobilityModel": {
        "name": "ns3::ConstantPositionMobilityModel",
        "attributes": [
          {
            "name": "Position",
            "value": [
              20.0,
              10.0,
              1.5
            ]
          }
        ]
      },
      "applications": [
        {
          "name": "ns3::UdpServer",
          "attributes": [
            {
              "name": "StartTime",
              "value": 0.4
            },
            {
              "name": "StopTime",
              "value": 1.0
            },
            {
              "name": "Port",
              "value": 1234
            }
          ]
        }
      ]
    },
    {
      //Voice UE
      "netDevices": [
        {
          "type": "nr",
          "networkLayer": 0,
          "role": "UE",
          "bearers": [
            {
              "type": "GBR_CONV_VOICE"
            }
          ]
        }
      ],
      "mobilityModel": {
        "name": "ns3::ConstantPositionMobilityModel",
        "attributes": [
          {
            "name": "Position",
            "value": [
              10.0,
              20.0,
              1.5
            ]
          }
        ]
      },
      "applications": [
        {
          "name": "ns3::UdpServer",
          "attributes": [
            {
              "name": "StartTime",
              "value": 0.4
            },
            {
              "name": "StopTime",
              "value": 1.0
            },
            {
              "name": "Port",
              "value": 1235
            }
          ]
        }
      ]
    }
  ],
  "ZSPs": [
    {
      "netDevices": [
        {
          "type": "nr",
          "role": "gNB",
          "networkLayer": 0
        }
      ],
      "mobilityModel": {
        "name": "ns3::ConstantPositionMobilityModel",
        "attributes": [
          {
            "name": "Position",
            "value": [
              10.0,
              20.0,
              10.0
            ]
          }
        ]
      },
      "applications": []
    }
  ],
  "remotes": [
    {
      "networkLayer": 0,
      "applications": [
        {
          "name": "ns3::UdpClient",
          "attributes": [
            {
              "name": "StartTime",
              "value": 0.4
            },
            {
              "name": "StopTime",
              "value": 1.0
            },
            {
              "name": "Remote",
              "value": [
                "7.0.0.2",
                1234
              ]
            },
            {
              "name": "MaxPackets",
              "value": 4294967295 //0xffffffff
            },
            {
              "name": "PacketSize",
              "value": 100
            },
            {
              "name": "Interval",
              "value": 0.0001
            }
          ]
        },
        {
          "name": "ns3::UdpClient",
          "attributes": [
            {
              "name": "StartTime",
              "value": 0.4
            },
            {
              "name": "StopTime",
              "value": 1.0
            },
            {
              "name": "Remote",
              "value": [
                "7.0.0.3",
                1235
              ]
            },
            {
              "name": "MaxPackets",
              "value": 4294967295 //0xffffffff
            },
            {
              "name": "PacketSize",
              "value": 1252
            },
            {
              "name": "Interval",
              "value": 0.0001
            }
          ]
        }
      ]
    }
  ],
  "logComponents": [
    "UdpClient",
    "UdpServer",
    "NrPdcp",
    "Scenario"
  ]
}
/*
HOW TO IMPLEMENT THIS??
  // Get the first netdevice (gnbNetDev.Get (0)) and the first bandwidth part (0)
  // and set the attribute.
    nrHelper->GetGnbPhy(gnbNetDev.Get(0),
  0)
        ->SetAttribute("Numerology", UintegerValue(numerologyBwp1));
    nrHelper->GetGnbPhy(gnbNetDev.Get(0),
  0)
        ->SetAttribute("TxPower", DoubleValue(10 * log10((bandwidthBand1 / totalBandwidth) * x)));

    if (doubleOperationalBand)
    {
    // Get the first netdevice (gnbNetDev.Get (0)) and the second bandwidth part (1)
    // and set the attribute.
        nrHelper->GetGnbPhy(gnbNetDev.Get(0),
    1)
            ->SetAttribute("Numerology", UintegerValue(numerologyBwp2));
        nrHelper->GetGnbPhy(gnbNetDev.Get(0),
    1)
            ->SetTxPower(10 * log10((bandwidthBand2 / totalBandwidth) * x));
  }
*/